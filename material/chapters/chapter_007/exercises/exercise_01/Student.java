package chapters.chapter07.exercises.exercise_01;

/**
 * 연습 문제 1: 학생 성적 관리 시스템 - 메모리 구조와 static 이해하기
 *
 * 학습 목표:
 * - 인스턴스 변수와 클래스 변수(static 변수)의 차이를 이해한다
 * - 각 변수가 어느 메모리 영역에 저장되는지 이해한다
 *   - 인스턴스 변수: 힙 영역 (각 객체마다 별도로 존재)
 *   - 클래스 변수(static): 메서드 영역 (모든 인스턴스가 공유)
 *   - 지역 변수: 스택 영역 (메서드 실행 중에만 존재)
 * - 인스턴스 메서드와 클래스 메서드(static 메서드)의 차이를 이해한다
 *
 * 시나리오:
 * 학생들의 성적을 관리하는 시스템을 구현합니다.
 * - 각 학생은 이름과 점수를 가집니다 (인스턴스별로 다름)
 * - 전체 학생 수와 전체 점수 합계는 모든 학생이 공유합니다 (static)
 * - 전체 평균을 계산하는 기능은 특정 인스턴스와 무관하게 동작합니다 (static 메서드)
 *
 * 메모리 구조 힌트:
 * ┌─────────────────────────────────────────────────────────────┐
 * │                        JVM 메모리                            │
 * ├──────────────────┬──────────────────┬───────────────────────┤
 * │    메서드 영역    │     스택 영역     │       힙 영역         │
 * ├──────────────────┼──────────────────┼───────────────────────┤
 * │ Student.class    │ main() 프레임    │ Student 인스턴스1     │
 * │  - totalCount    │  - student1 참조 │  - name = "김철수"    │
 * │  - totalScore    │  - student2 참조 │  - score = 85        │
 * │                  │                  ├───────────────────────┤
 * │                  │                  │ Student 인스턴스2     │
 * │                  │                  │  - name = "이영희"    │
 * │                  │                  │  - score = 92        │
 * └──────────────────┴──────────────────┴───────────────────────┘
 */
public class Student {

    // ==========================================================
    // TODO 1: 인스턴스 변수 선언
    // - name (String): 학생 이름 - private
    // - score (int): 학생 점수 - private
    //
    // 힌트: 인스턴스 변수는 각 객체(인스턴스)마다 별도로 생성되며,
    //       힙 영역에 저장됩니다.
    // ==========================================================
    private String name;
    private int score;

    // ==========================================================
    // TODO 2: 클래스 변수(static 변수) 선언
    // - totalCount (int): 전체 학생 수 - private static
    // - totalScore (int): 전체 점수 합계 - private static
    //
    // 힌트: 클래스 변수는 모든 인스턴스가 공유하며,
    //       메서드 영역의 static 영역에 저장됩니다.
    //       JVM이 클래스를 로딩하는 순간 생성됩니다.
    // ==========================================================
    private static int totalCount;
    private static int totalScore;

    // ==========================================================
    // TODO 3: 생성자 구현
    // - 매개변수: name (String), score (int)
    // - 인스턴스 변수 초기화
    // - 학생이 생성될 때마다 totalCount를 1 증가시킵니다
    // - 학생이 생성될 때마다 totalScore에 해당 학생의 점수를 더합니다
    // - 생성 시 "학생 등록: [이름], 점수: [점수]" 출력
    //
    // 힌트: 생성자 내의 지역 변수(매개변수 포함)는 스택 영역에 저장됩니다.
    //       this.name처럼 인스턴스 변수에 접근할 때는 힙 영역의 데이터를 수정합니다.
    //       totalCount++처럼 static 변수에 접근할 때는 메서드 영역의 데이터를 수정합니다.
    // ==========================================================
    public Student(String name, int score) {
        this.name = name;
        this.score = score;
        totalCount++;
        totalScore += score;
        System.out.println("학생 등록: " + name + ", 점수: " + score);
    }

    // ==========================================================
    // TODO 4: 인스턴스 메서드 구현 - getInfo()
    // - 반환 타입: String
    // - 반환 형식: "이름: [이름], 점수: [점수]"
    //
    // 힌트: 인스턴스 메서드는 static 없이 선언합니다.
    //       인스턴스 메서드는 인스턴스 변수, 클래스 변수 모두 접근 가능합니다.
    // ==========================================================
    public String getInfo() {
        return "이름: " + this.name + ", 점수: " + this.score;
    }

    // ==========================================================
    // TODO 5: 클래스 메서드(static 메서드) 구현 - getTotalCount()
    // - 반환 타입: int
    // - 전체 학생 수(totalCount) 반환
    //
    // 힌트: 클래스 메서드는 static 키워드를 붙여 선언합니다.
    //       클래스 메서드는 클래스 변수(static)만 접근 가능합니다.
    //       인스턴스 변수(name, score)에는 접근할 수 없습니다!
    // ==========================================================
    public static int getTotalCount() {
        return Student.totalCount;
    }

    // ==========================================================
    // TODO 6: 클래스 메서드(static 메서드) 구현 - getTotalScore()
    // - 반환 타입: int
    // - 전체 점수 합계(totalScore) 반환
    // ==========================================================
    public static int getTotalScore() {
        return Student.totalScore;
    }

    // ==========================================================
    // TODO 7: 클래스 메서드(static 메서드) 구현 - getAverage()
    // - 반환 타입: double
    // - 전체 평균 점수 계산 및 반환
    // - 학생이 0명인 경우 0.0 반환 (0으로 나누기 방지)
    //
    // 힌트: static 메서드에서 다른 static 메서드 호출 가능
    //       예: getTotalScore(), getTotalCount() 활용
    // ==========================================================
    public static double getAverage() {
        if (Student.totalCount == 0) {
            return 0.0;
        }
        return (double) Student.totalScore / Student.totalCount;
    }

    // ==========================================================
    // TODO 8: 클래스 메서드(static 메서드) 구현 - printStatistics()
    // - 반환 타입: void
    // - 다음 형식으로 출력:
    //   "=== 전체 통계 ==="
    //   "전체 학생 수: [totalCount]명"
    //   "전체 점수 합계: [totalScore]점"
    //   "전체 평균 점수: [average]점"
    //
    // 힌트: 이 메서드는 특정 인스턴스와 무관하게 전체 통계를 출력합니다.
    //       따라서 static 메서드로 구현하는 것이 적합합니다.
    // ==========================================================
    public static void printStatistics() {
        System.out.println("=== 전체 통계 ===");
        System.out.println("전체 학생 수: " + Student.totalCount + "명");
        System.out.println("전체 점수 합계: " + Student.totalScore + "점");
        System.out.println("전체 평균 점수: " + Student.getAverage() + "점");
    }
}
