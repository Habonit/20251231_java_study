# í…ŒìŠ¤íŠ¸ ì›ì¹™ ë° ë°©ë²•ë¡  - Rust

## ê°œìš”

ì´ ë¬¸ì„œëŠ” **TDD(Test-Driven Development)**ë¥¼ Rust í™˜ê²½ì—ì„œ ì‹¤ì²œí•˜ê¸° ìœ„í•œ ì™„ì „í•œ ë°©ë²•ë¡ ì„ ì œê³µí•œë‹¤.

### ì´ ë¬¸ì„œë¥¼ ìˆ™ì§€í•˜ë©´ í•  ìˆ˜ ìˆëŠ” ê²ƒ

| ì—­ëŸ‰ | ì„¤ëª… | ê´€ë ¨ ì„¹ì…˜ |
|:-----|:-----|:-----|
| **Red-Green-Refactor ì‚¬ì´í´ ì‹¤ì²œ** | ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± â†’ í†µê³¼í•˜ëŠ” ì½”ë“œ êµ¬í˜„ â†’ ë¦¬íŒ©í† ë§ì˜ ë°˜ë³µ | Part 1, Section 1 |
| **íš¨ê³¼ì ì¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¤ê³„** | ê²½ê³„ê°’ ë¶„ì„, ë™ì¹˜ ë¶„í• ë¡œ ëˆ„ë½ ì—†ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë„ì¶œ | Part 1, Section 3 |
| **í…ŒìŠ¤íŠ¸ ë”ë¸” í™œìš©** | Mock, Stubì„ mockall í¬ë ˆì´íŠ¸ë¡œ êµ¬í˜„ | Part 1, Section 4 |
| **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±** | #[test] ë§¤í¬ë¡œ, assert! ë§¤í¬ë¡œ í™œìš© | Part 2 |
| **í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±** | tests/ ë””ë ‰í† ë¦¬, ì‹¤ì œ ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ | Part 3 |
| **E2E í…ŒìŠ¤íŠ¸ ì„¤ê³„** | ì „ì²´ ì‹œìŠ¤í…œ íë¦„ ê²€ì¦ | Part 4 |

### Red â†’ Green â†’ Refactor ë‹¬ì„± ê²½ë¡œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TDD ì‚¬ì´í´ ë‹¬ì„± ê²½ë¡œ                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ğŸ”´ RED (ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±)                                               â”‚
â”‚   â”œâ”€ Part 1, Section 3: í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¤ê³„ ê¸°ë²•ìœ¼ë¡œ "ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í• ì§€" ê²°ì •     â”‚
â”‚   â”œâ”€ Part 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™ìœ¼ë¡œ "ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í• ì§€" ê²°ì •                 â”‚
â”‚   â””â”€ Part 3, 4: í†µí•©/E2E í…ŒìŠ¤íŠ¸ë¡œ "ì „ì²´ íë¦„ì„ ì–´ë–»ê²Œ ê²€ì¦í• ì§€" ê²°ì •            â”‚
â”‚                                                                             â”‚
â”‚                              â–¼                                              â”‚
â”‚                                                                             â”‚
â”‚   ğŸŸ¢ GREEN (í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±)                               â”‚
â”‚   â”œâ”€ Part 1, Section 1.2: "ìµœì†Œí•œì˜ ì½”ë“œ"ë€ í…ŒìŠ¤íŠ¸ë§Œ í†µê³¼í•˜ëŠ” ì½”ë“œ              â”‚
â”‚   â”œâ”€ Part 1, Section 4: mockallë¡œ ì™¸ë¶€ ì˜ì¡´ì„± ê²©ë¦¬í•˜ë©° êµ¬í˜„                    â”‚
â”‚   â””â”€ Part 2, Section 5.3: Arrange-Act-Assert íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ ê²°ê³¼ ê²€ì¦          â”‚
â”‚                                                                             â”‚
â”‚                              â–¼                                              â”‚
â”‚                                                                             â”‚
â”‚   ğŸ”µ REFACTOR (ì½”ë“œ ê°œì„ , í…ŒìŠ¤íŠ¸ëŠ” ê³„ì† í†µê³¼)                                  â”‚
â”‚   â”œâ”€ Part 1, Section 2: í…ŒìŠ¤íŠ¸ ëª¨ë“ˆë¡œ ì¤‘ë³µ ì œê±°                               â”‚
â”‚   â”œâ”€ Part 2, Section 7: í…ŒìŠ¤íŠ¸ ìš°ì„ ìˆœìœ„ë¡œ ì¤‘ìš”í•œ ê²ƒë¶€í„° ê°œì„                     â”‚
â”‚   â””â”€ ëª¨ë“  Part: í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ ì•ˆì „í•˜ê²Œ ë¦¬íŒ©í† ë§ ê°€ëŠ¥                        â”‚
â”‚                                                                             â”‚
â”‚                              â–¼                                              â”‚
â”‚                         (ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ë°˜ë³µ)                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TDD ìˆ™ë ¨ë„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Red-Green-Refactor ì‚¬ì´í´ì„ ì„¤ëª…í•˜ê³  ì‹¤ì²œí•  ìˆ˜ ìˆë‹¤
- [ ] í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³ , ê·¸ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤
- [ ] ê²½ê³„ê°’ ë¶„ì„ê³¼ ë™ì¹˜ ë¶„í• ë¡œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤
- [ ] mockall í¬ë ˆì´íŠ¸ë¡œ Mock ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í™œìš©í•  ìˆ˜ ìˆë‹¤
- [ ] Arrange-Act-Assert íŒ¨í„´ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ êµ¬ì¡°í™”í•  ìˆ˜ ìˆë‹¤
- [ ] í…ŒìŠ¤íŠ¸ ëª¨ë“ˆê³¼ í—¬í¼ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°„ ì¤‘ë³µì„ ì œê±°í•  ìˆ˜ ìˆë‹¤
- [ ] ë‹¨ìœ„/í†µí•©/E2E í…ŒìŠ¤íŠ¸ì˜ ì°¨ì´ë¥¼ ì•Œê³  ìƒí™©ì— ë§ê²Œ ì„ íƒí•  ìˆ˜ ìˆë‹¤
- [ ] í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ ë¹„ìœ¨(Unit 70% : Integration 25% : E2E 5%)ì„ ì´í•´í•œë‹¤

---

## ëª©ì°¨

- [Part 1: TDD ë°©ë²•ë¡ ](#part-1-tdd-ë°©ë²•ë¡ )
- [Part 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê·œì¹™](#part-2-ë‹¨ìœ„-í…ŒìŠ¤íŠ¸-ê·œì¹™)
- [Part 3: í†µí•© í…ŒìŠ¤íŠ¸ ê·œì¹™](#part-3-í†µí•©-í…ŒìŠ¤íŠ¸-ê·œì¹™)
- [Part 4: E2E í…ŒìŠ¤íŠ¸ ê·œì¹™](#part-4-e2e-í…ŒìŠ¤íŠ¸-ê·œì¹™)

---

# Part 1: TDD ë°©ë²•ë¡ 

## 1. TDDë€?

**TDD(Test-Driven Development, í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ)**ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³ , ê·¸ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê°œë°œ ë°©ë²•ë¡ ì´ë‹¤.

### 1.1 í•µì‹¬ ì² í•™

> "ë™ì‘í•˜ëŠ” ê¹”ë”í•œ ì½”ë“œ(Clean code that works)"ë¥¼ ëª©í‘œë¡œ í•œë‹¤.

- **í…ŒìŠ¤íŠ¸ê°€ ê°œë°œì„ ì´ëˆë‹¤**: ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì „ì— "ì´ ì½”ë“œê°€ ë¬´ì—‡ì„ í•´ì•¼ í•˜ëŠ”ê°€?"ë¥¼ í…ŒìŠ¤íŠ¸ë¡œ ë¨¼ì € ì •ì˜
- **ì‘ì€ ë‹¨ìœ„ë¡œ ë°˜ë³µ**: í•œ ë²ˆì— í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ í…ŒìŠ¤íŠ¸í•˜ê³  êµ¬í˜„
- **ë¦¬íŒ©í† ë§ ì•ˆì „ë§**: í…ŒìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´ ì½”ë“œë¥¼ ì•ˆì „í•˜ê²Œ ê°œì„ í•  ìˆ˜ ìˆìŒ

### 1.2 Red-Green-Refactor ì‚¬ì´í´

TDDì˜ í•µì‹¬ì€ **3ë‹¨ê³„ ì‚¬ì´í´**ì„ ë°˜ë³µí•˜ëŠ” ê²ƒì´ë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚    â”‚   Red   â”‚ â”€â”€â”€â–º â”‚  Green  â”‚ â”€â”€â”€â–º â”‚ Refactor  â”‚ â”€â”€â”     â”‚
â”‚    â”‚ (ì‹¤íŒ¨)  â”‚      â”‚ (í†µê³¼)  â”‚      â”‚  (ê°œì„ )   â”‚   â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚         â–²                                            â”‚     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ë‹¨ê³„ | ì„¤ëª… | ì˜ˆì‹œ |
|:-----|:-----|:-----|
| **Red** | ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± | `test_add()` ì‘ì„± â†’ ì‹¤í–‰ â†’ ì‹¤íŒ¨ (í•¨ìˆ˜ê°€ ì—†ìœ¼ë‹ˆê¹Œ) |
| **Green** | í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„± | `fn add(a: i32, b: i32) -> i32 { a + b }` êµ¬í˜„ â†’ í…ŒìŠ¤íŠ¸ í†µê³¼ |
| **Refactor** | ì½”ë“œ ê°œì„  (í…ŒìŠ¤íŠ¸ëŠ” ê³„ì† í†µê³¼í•´ì•¼ í•¨) | ì¤‘ë³µ ì œê±°, ë„¤ì´ë° ê°œì„ , êµ¬ì¡° ì •ë¦¬ |

### 1.3 TDD ì˜ˆì‹œ

```rust
// 1ë‹¨ê³„: Red - ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_calculate_discount_ten_percent() {
        // 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤
        assert_eq!(calculate_discount(1000, 10), 900);
    }
}
// â†’ ì‹¤í–‰í•˜ë©´ ì‹¤íŒ¨ (calculate_discount í•¨ìˆ˜ê°€ ì—†ìŒ)

// 2ë‹¨ê³„: Green - í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ
fn calculate_discount(price: i32, percent: i32) -> i32 {
    price - (price * percent / 100)
}
// â†’ í…ŒìŠ¤íŠ¸ í†µê³¼

// 3ë‹¨ê³„: Refactor - ì½”ë“œ ê°œì„ 
/// ê°€ê²©ì—ì„œ í• ì¸ìœ¨ë§Œí¼ ì°¨ê°í•œ ê¸ˆì•¡ì„ ë°˜í™˜.
///
/// # Panics
/// í• ì¸ìœ¨ì´ 0~100 ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ íŒ¨ë‹‰ ë°œìƒ
fn calculate_discount(price: i32, percent: i32) -> i32 {
    assert!(
        (0..=100).contains(&percent),
        "í• ì¸ìœ¨ì€ 0~100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤"
    );
    let discount_amount = price * percent / 100;
    price - discount_amount
}
// â†’ í…ŒìŠ¤íŠ¸ ì—¬ì „íˆ í†µê³¼, ì½”ë“œëŠ” ë” ê²¬ê³ í•´ì§
```

---

## 2. TDD ì ìš© ì‹œë‚˜ë¦¬ì˜¤

### 2.1 í˜„ì‹¤ì ì¸ TDD

| ìƒí™© | ì ìš© ë°©ë²• |
|:-----|:---------|
| **ìƒˆ ê¸°ëŠ¥ ì¶”ê°€** | í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„± â†’ ê¸°ëŠ¥ êµ¬í˜„ â†’ ë¦¬íŒ©í† ë§ |
| **ë²„ê·¸ ìˆ˜ì •** | ë²„ê·¸ë¥¼ ì¬í˜„í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± â†’ ìˆ˜ì • â†’ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸ |
| **ê¸°ì¡´ ì½”ë“œ** | í˜„ì¬ ë™ì‘ì„ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± (Characterization Test) |

### 2.2 í…ŒìŠ¤íŠ¸ ê²©ë¦¬ (Test Isolation)

ê° í…ŒìŠ¤íŠ¸ëŠ” **ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì£¼ê±°ë‚˜ ë°›ì§€ ì•Šì•„ì•¼** í•œë‹¤.

```rust
// Bad: í…ŒìŠ¤íŠ¸ ê°„ ìƒíƒœ ê³µìœ 
use std::sync::atomic::{AtomicI32, Ordering};
static COUNTER: AtomicI32 = AtomicI32::new(0);

#[test]
fn test_increment() {
    COUNTER.fetch_add(1, Ordering::SeqCst);
    assert_eq!(COUNTER.load(Ordering::SeqCst), 1);  // í†µê³¼í•  ìˆ˜ë„, ì‹¤íŒ¨í•  ìˆ˜ë„
}

#[test]
fn test_increment_again() {
    COUNTER.fetch_add(1, Ordering::SeqCst);
    assert_eq!(COUNTER.load(Ordering::SeqCst), 1);  // í…ŒìŠ¤íŠ¸ ìˆœì„œì— ë”°ë¼ ì‹¤íŒ¨
}

// Good: ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì 
#[test]
fn test_increment() {
    let mut counter = 0;
    counter += 1;
    assert_eq!(counter, 1);
}

#[test]
fn test_increment_again() {
    let mut counter = 0;
    counter += 1;
    assert_eq!(counter, 1);  // í•­ìƒ í†µê³¼
}
```

---

## 3. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¤ê³„ ê¸°ë²•

### 3.1 ê²½ê³„ê°’ ë¶„ì„ (Boundary Value Analysis)

```rust
/// ë‚˜ì´ê°€ 0~120 ì‚¬ì´ì—¬ì•¼ ìœ íš¨í•œ ê²½ìš°
fn is_valid_age(age: i32) -> bool {
    (0..=120).contains(&age)
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_age_boundary_values() {
        // ê²½ê³„ ì•ˆìª½ (ìœ íš¨)
        assert!(is_valid_age(0));     // ìµœì†Œ ê²½ê³„
        assert!(is_valid_age(120));   // ìµœëŒ€ ê²½ê³„

        // ê²½ê³„ ë°”ê¹¥ (ë¬´íš¨)
        assert!(!is_valid_age(-1));   // ìµœì†Œ ê²½ê³„ -1
        assert!(!is_valid_age(121));  // ìµœëŒ€ ê²½ê³„ +1
    }
}
```

### 3.2 ë™ë“± ë¶„í•  (Equivalence Partitioning)

```rust
/// ì ìˆ˜ì— ë”°ë¥¸ ë“±ê¸‰ ê³„ì‚°
fn get_grade(score: i32) -> char {
    match score {
        90..=100 => 'A',
        80..=89 => 'B',
        70..=79 => 'C',
        _ => 'F',
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_grade_equivalence_partitions() {
        assert_eq!(get_grade(95), 'A');  // 90-100 íŒŒí‹°ì…˜
        assert_eq!(get_grade(85), 'B');  // 80-89 íŒŒí‹°ì…˜
        assert_eq!(get_grade(75), 'C');  // 70-79 íŒŒí‹°ì…˜
        assert_eq!(get_grade(50), 'F');  // 0-69 íŒŒí‹°ì…˜
    }
}
```

### 3.3 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ì¼€ì´ìŠ¤ ìœ í˜• | ì´ìœ  |
|:---------|:-----------|:-----|
| P0 | ì •ìƒ ì¼€ì´ìŠ¤ (Happy Path) | ê¸°ë³¸ ê¸°ëŠ¥ì´ ë™ì‘í•´ì•¼ í•¨ |
| P1 | ê²½ê³„ê°’ ì¼€ì´ìŠ¤ | ë²„ê·¸ê°€ ìì£¼ ë°œìƒí•˜ëŠ” ì§€ì  |
| P2 | ì—ëŸ¬ ì¼€ì´ìŠ¤ | ì˜ˆì™¸ ìƒí™© ì²˜ë¦¬ ê²€ì¦ |
| P3 | ê·¹ë‹¨ì  ì¼€ì´ìŠ¤ | None ì…ë ¥, ë§¤ìš° í° ì…ë ¥ ë“± |

---

## 4. í…ŒìŠ¤íŠ¸ ë”ë¸” (Test Double)

### 4.1 í…ŒìŠ¤íŠ¸ ë”ë¸”ì´ë€?

ì‹¤ì œ ê°ì²´ ëŒ€ì‹  **í…ŒìŠ¤íŠ¸ìš© ê°€ì§œ ê°ì²´**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì™¸ë¶€ ì˜ì¡´ì„±ì„ ê²©ë¦¬í•œë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ê°œë…                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   ì‹¤ì œ ì‹œìŠ¤í…œ                           í…ŒìŠ¤íŠ¸ í™˜ê²½                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚   ë‚´ ì½”ë“œ   â”‚                      â”‚   ë‚´ ì½”ë“œ   â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚          â”‚ í˜¸ì¶œ                               â”‚ í˜¸ì¶œ                     â”‚
â”‚          â–¼                                    â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚  ì‹¤ì œ DB    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º      â”‚  Mock DB    â”‚  â† í…ŒìŠ¤íŠ¸ ë”ë¸”   â”‚
â”‚   â”‚  ì‹¤ì œ API   â”‚      ëŒ€ì²´            â”‚  Mock API   â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 mockallì„ í™œìš©í•œ í…ŒìŠ¤íŠ¸ ë”ë¸”

```rust
use mockall::automock;

#[automock]
trait UserRepository {
    fn find_by_id(&self, id: u64) -> Option<User>;
    fn save(&self, user: &User) -> Result<(), String>;
}

struct User {
    id: u64,
    name: String,
}

struct UserService<T: UserRepository> {
    repository: T,
}

impl<T: UserRepository> UserService<T> {
    fn get_user_name(&self, id: u64) -> Option<String> {
        self.repository.find_by_id(id).map(|u| u.name)
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_get_user_name_with_mock() {
        // Arrange: Mock ì„¤ì •
        let mut mock_repo = MockUserRepository::new();
        mock_repo
            .expect_find_by_id()
            .with(mockall::predicate::eq(1))
            .returning(|_| Some(User { id: 1, name: "í™ê¸¸ë™".to_string() }));

        let service = UserService { repository: mock_repo };

        // Act
        let result = service.get_user_name(1);

        // Assert
        assert_eq!(result, Some("í™ê¸¸ë™".to_string()));
    }
}
```

### 4.3 ì–¸ì œ í…ŒìŠ¤íŠ¸ ë”ë¸”ì„ ì‚¬ìš©í•˜ë‚˜?

| ìƒí™© | ì‚¬ìš© ì—¬ë¶€ | ì´ìœ  |
|:-----|:---------|:-----|
| ì™¸ë¶€ API í˜¸ì¶œ | O | ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„± ì œê±°, ë¹„ìš© ì ˆê° |
| ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ | O ë˜ëŠ” X | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” Mock, í†µí•© í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ DB |
| ì‹œê°„ ì˜ì¡´ ë¡œì§ | O | ì‹œê°„ì„ Mockí•˜ì—¬ í…ŒìŠ¤íŠ¸ |
| ë‚´ë¶€ ìœ í‹¸ í•¨ìˆ˜ | X | ì‹¤ì œ êµ¬í˜„ ì‚¬ìš© (ê³¼ë„í•œ Mock ì§€ì–‘) |

---

## 5. í…ŒìŠ¤íŠ¸ ìœ í˜• ì„ íƒ ê°€ì´ë“œ

### 5.1 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  E2E  â”‚  â† 5% (í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤ë§Œ)
                   â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   í†µí•©    â”‚  â† 25% (ì£¼ìš” ì›Œí¬í”Œë¡œìš°)
                 â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    ë‹¨ìœ„       â”‚  â† 70% (ëŒ€ë¶€ë¶„ì˜ í…ŒìŠ¤íŠ¸)
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Part 2: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê·œì¹™

## 6. í•µì‹¬ ê°œë…

### 6.1 í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ êµ¬ì¡°

Rustì—ì„œëŠ” `#[cfg(test)]` ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆì„ ì •ì˜í•œë‹¤.

```rust
// src/calculator.rs
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}

pub fn divide(a: i32, b: i32) -> Result<i32, String> {
    if b == 0 {
        Err("0ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤".to_string())
    } else {
        Ok(a / b)
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    // í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜
    fn setup_test_data() -> (i32, i32) {
        (10, 5)
    }

    #[test]
    fn test_add_positive_numbers() {
        let (a, b) = setup_test_data();
        assert_eq!(add(a, b), 15);
    }

    #[test]
    fn test_divide_success() {
        let (a, b) = setup_test_data();
        assert_eq!(divide(a, b), Ok(2));
    }

    #[test]
    fn test_divide_by_zero() {
        assert_eq!(divide(10, 0), Err("0ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤".to_string()));
    }
}
```

### 6.2 í…ŒìŠ¤íŠ¸ ì–´íŠ¸ë¦¬ë·°íŠ¸

| ì–´íŠ¸ë¦¬ë·°íŠ¸ | ì„¤ëª… | ì‚¬ìš© ì‚¬ë¡€ |
|:-----------|:-----|:---------|
| `#[test]` | í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ í‘œì‹œ | ëª¨ë“  í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ |
| `#[ignore]` | í…ŒìŠ¤íŠ¸ ê±´ë„ˆë›°ê¸° | ëŠë¦° í…ŒìŠ¤íŠ¸, ë¯¸ì™„ì„± í…ŒìŠ¤íŠ¸ |
| `#[should_panic]` | íŒ¨ë‹‰ ì˜ˆìƒ | ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ |
| `#[cfg(test)]` | í…ŒìŠ¤íŠ¸ ë¹Œë“œì—ì„œë§Œ ì»´íŒŒì¼ | í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ì •ì˜ |

```rust
#[test]
#[ignore]
fn test_slow_operation() {
    // ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” í…ŒìŠ¤íŠ¸
}

#[test]
#[should_panic(expected = "í• ì¸ìœ¨ì€ 0~100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤")]
fn test_invalid_discount_rate_panics() {
    calculate_discount(1000, 150);
}
```

### 6.3 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ (cargo-tarpaulin)

```bash
# cargo-tarpaulin ì„¤ì¹˜
cargo install cargo-tarpaulin

# ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
cargo tarpaulin

# HTML ë¦¬í¬íŠ¸ ìƒì„±
cargo tarpaulin --out Html

# íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ì¸¡ì •
cargo tarpaulin -p my_crate
```

---

## 7. í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

### 7.1 ì–‘ë°©í–¥ ì¶”ì ì„± (Bidirectional Traceability)

**í…ŒìŠ¤íŠ¸ â†’ ì†ŒìŠ¤ ì½”ë“œ**

```rust
/// ëŒ€ìƒ: src/calculator.rs:45 - add()
/// ì˜ë„: ì–‘ìˆ˜ ë‘ ê°œë¥¼ ë”í–ˆì„ ë•Œ ì˜¬ë°”ë¥¸ ê²°ê³¼ ë°˜í™˜ ê²€ì¦
#[test]
fn test_add_positive_numbers() { ... }
```

**ì†ŒìŠ¤ ì½”ë“œ â†’ í…ŒìŠ¤íŠ¸**

```rust
/// ë‘ ìˆ«ìë¥¼ ë”í•œ ê²°ê³¼ë¥¼ ë°˜í™˜.
///
/// # Test
/// tests/calculator_test.rs::test_add_positive_numbers
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}
```

### 7.2 Arrange-Act-Assert íŒ¨í„´

ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” **AAA íŒ¨í„´**ì„ ë”°ë¼ êµ¬ì¡°í™”í•œë‹¤.

```rust
#[test]
fn test_filter_list_by_condition() {
    // ëŒ€ìƒ: src/utils.rs:234 - filter_list()
    // ì˜ë„: ì¡°ê±´ì— ë§ëŠ” í•­ëª©ë§Œ í•„í„°ë§ë˜ëŠ”ì§€ ê²€ì¦

    // Arrange: í…ŒìŠ¤íŠ¸ ë°ì´í„° ë° í™˜ê²½ ì¤€ë¹„
    let items = vec![1, 2, 3, 4, 5];
    let threshold = 3;

    // Act: í…ŒìŠ¤íŠ¸ ëŒ€ìƒ í•¨ìˆ˜ ì‹¤í–‰
    let result: Vec<_> = items.into_iter().filter(|&x| x >= threshold).collect();

    // Assert: ê²°ê³¼ ê²€ì¦
    assert_eq!(result, vec![3, 4, 5]);
}
```

### 7.3 Resultë¥¼ ë°˜í™˜í•˜ëŠ” í…ŒìŠ¤íŠ¸

```rust
#[test]
fn test_with_result() -> Result<(), String> {
    let result = some_operation()?;
    assert_eq!(result, expected_value);
    Ok(())
}
```

---

## 8. í…ŒìŠ¤íŠ¸ êµ¬ì¡° ê·œì¹™

### 8.1 ë„¤ì´ë° ê·œì¹™

**íŒŒì¼ëª…**: `{ëª¨ë“ˆëª…}.rs` ë‚´ `mod tests` ë˜ëŠ” `tests/{ëª¨ë“ˆëª…}_test.rs`

**í•¨ìˆ˜ëª…**: `test_{í•¨ìˆ˜ëª…}_{ì‹œë‚˜ë¦¬ì˜¤}`
- `test_add_positive_numbers`
- `test_parse_invalid_input`
- `test_filter_empty_result`

### 8.2 í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”

```rust
#[cfg(test)]
mod tests {
    use super::*;

    mod add {
        use super::*;

        #[test]
        fn test_positive_numbers() {
            assert_eq!(add(2, 3), 5);
        }

        #[test]
        fn test_negative_numbers() {
            assert_eq!(add(-2, -3), -5);
        }
    }

    mod divide {
        use super::*;

        #[test]
        fn test_success() {
            assert_eq!(divide(10, 2), Ok(5));
        }

        #[test]
        fn test_divide_by_zero() {
            assert!(divide(10, 0).is_err());
        }
    }
}
```

---

## 9. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] docstringì— **ëŒ€ìƒ**(íŒŒì¼:ë¼ì¸ - í•¨ìˆ˜ëª…)ì´ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ì˜ë„**(ë¬´ì—‡ì„ ê²€ì¦í•˜ëŠ”ì§€)ê°€ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] ì†ŒìŠ¤ ì½”ë“œì— **í…ŒìŠ¤íŠ¸ ìœ„ì¹˜ ì£¼ì„**(`# Test: ...`)ì´ ì¶”ê°€ë˜ì—ˆëŠ”ê°€?
- [ ] **Arrange-Act-Assert íŒ¨í„´**ì„ ë”°ë¥´ê³  ìˆëŠ”ê°€?
- [ ] ì¬ì‚¬ìš© ë°ì´í„°ëŠ” **í—¬í¼ í•¨ìˆ˜**ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆëŠ”ê°€?
- [ ] í•¨ìˆ˜ëª…ì´ `test_{í•¨ìˆ˜ëª…}_{ì‹œë‚˜ë¦¬ì˜¤}` í˜•ì‹ì¸ê°€?
- [ ] ê´€ë ¨ í…ŒìŠ¤íŠ¸ê°€ **ëª¨ë“ˆ**ë¡œ ê·¸ë£¹í™”ë˜ì–´ ìˆëŠ”ê°€?

---

# Part 3: í†µí•© í…ŒìŠ¤íŠ¸ ê·œì¹™

## 10. í†µí•© í…ŒìŠ¤íŠ¸ë€?

### 10.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ vs í†µí•© í…ŒìŠ¤íŠ¸

| êµ¬ë¶„ | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | í†µí•© í…ŒìŠ¤íŠ¸ |
|:-----|:-----------|:-----------|
| **ë²”ìœ„** | í•¨ìˆ˜/ë©”ì„œë“œ í•˜ë‚˜ | ì—¬ëŸ¬ ëª¨ë“ˆ/ì»´í¬ë„ŒíŠ¸ ì¡°í•© |
| **ìœ„ì¹˜** | `src/` ë‚´ `mod tests` | `tests/` ë””ë ‰í† ë¦¬ |
| **ì˜ì¡´ì„±** | Mock ì‚¬ìš© | ì‹¤ì œ ì˜ì¡´ì„± ì‚¬ìš© |
| **ì†ë„** | ë¹ ë¦„ (< 1ì´ˆ) | ëŠë¦¼ (ìˆ˜ ì´ˆ ~ ìˆ˜ì‹­ ì´ˆ) |

### 10.2 Rust í†µí•© í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs
â”‚   â””â”€â”€ calculator.rs
â””â”€â”€ tests/                    # í†µí•© í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬
    â”œâ”€â”€ common/               # ê³µí†µ í—¬í¼
    â”‚   â””â”€â”€ mod.rs
    â”œâ”€â”€ calculator_integration.rs
    â””â”€â”€ workflow_integration.rs
```

---

## 11. í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

### 11.1 íŒŒì¼ êµ¬ì¡°

```rust
// tests/common/mod.rs
pub fn setup_test_environment() -> TestContext {
    // í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •
    TestContext::new()
}

// tests/calculator_integration.rs
mod common;

use my_crate::calculator;

#[test]
fn test_calculator_workflow() {
    // í†µí•© í…ŒìŠ¤íŠ¸ ID: INT-001
    // ëŒ€ìƒ íë¦„: input â†’ calculate â†’ output

    let ctx = common::setup_test_environment();

    // í…ŒìŠ¤íŠ¸ ë¡œì§
    let result = calculator::process(&ctx.input);
    assert_eq!(result, expected_output);
}
```

### 11.2 ë„¤ì´ë° ê·œì¹™

**íŒŒì¼ëª…**: `{ì›Œí¬í”Œë¡œìš°ëª…}_integration.rs`
- `calculator_integration.rs`
- `user_workflow_integration.rs`

**í•¨ìˆ˜ëª…**: `test_{ì‹œì‘ëª¨ë“ˆ}_to_{ëëª¨ë“ˆ}_{ì‹œë‚˜ë¦¬ì˜¤}`
- `test_parser_to_processor_valid_input`
- `test_api_to_storage_success`

### 11.3 Docstring í˜•ì‹

```rust
/// í†µí•© í…ŒìŠ¤íŠ¸ ID: INT-001
/// ëŒ€ìƒ íë¦„: loader -> processor -> reporter
///
/// ê²€ì¦ ë‚´ìš©:
/// 1. íŒŒì¼ì„ ì •ìƒì ìœ¼ë¡œ ë¡œë“œ
/// 2. ë°ì´í„° ì²˜ë¦¬ê°€ ì˜¬ë°”ë¥´ê²Œ ìˆ˜í–‰ë¨
/// 3. ë¦¬í¬íŠ¸ê°€ ì •ìƒ ìƒì„±ë¨
///
/// ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ìš©ìê°€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë¦¬í¬íŠ¸ë¥¼ ìš”ì²­
#[test]
fn test_file_to_report_pipeline() {
    // ...
}
```

---

## 12. í†µí•© í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] docstringì— **í†µí•© í…ŒìŠ¤íŠ¸ ID** (INT-XXX)ê°€ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ëŒ€ìƒ íë¦„** (ëª¨ë“ˆ â†’ ëª¨ë“ˆ)ì´ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ê²€ì¦ ë‚´ìš©**ì´ ë‹¨ê³„ë³„ë¡œ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] `tests/` ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•´ ìˆëŠ”ê°€?
- [ ] íŒŒì¼ëª…ì´ `{ì›Œí¬í”Œë¡œìš°ëª…}_integration.rs` í˜•ì‹ì¸ê°€?
- [ ] í…ŒìŠ¤íŠ¸ ê°„ ë…ë¦½ì„±ì´ ë³´ì¥ë˜ëŠ”ê°€?

---

# Part 4: E2E í…ŒìŠ¤íŠ¸ ê·œì¹™

## 13. E2E í…ŒìŠ¤íŠ¸ë€?

**ì‚¬ìš©ì ê´€ì ì—ì„œ ì „ì²´ ì‹œìŠ¤í…œ**ì„ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ë‹¤.

### 13.1 Rust E2E í…ŒìŠ¤íŠ¸ ë„êµ¬

| ë„êµ¬ | ìš©ë„ | íŠ¹ì§• |
|:-----|:-----|:-----|
| **assert_cmd** | CLI E2E í…ŒìŠ¤íŠ¸ | ëª…ë ¹í–‰ í”„ë¡œê·¸ë¨ í…ŒìŠ¤íŠ¸ |
| **reqwest** | API E2E í…ŒìŠ¤íŠ¸ | HTTP í´ë¼ì´ì–¸íŠ¸ |
| **testcontainers-rs** | í™˜ê²½ êµ¬ì„± | Docker ê¸°ë°˜ ì˜ì¡´ì„± |

---

## 14. CLI E2E í…ŒìŠ¤íŠ¸

```rust
// tests/e2e/cli_test.rs
use assert_cmd::Command;
use predicates::prelude::*;

/// E2E í…ŒìŠ¤íŠ¸ ID: E2E-001
/// ì‹œë‚˜ë¦¬ì˜¤: CLIë¡œ íŒŒì¼ ì²˜ë¦¬ í›„ ê²°ê³¼ í™•ì¸
///
/// ê²€ì¦ ë‹¨ê³„:
/// 1. ì…ë ¥ íŒŒì¼ ì¤€ë¹„
/// 2. CLI ëª…ë ¹ ì‹¤í–‰
/// 3. ì¶œë ¥ í™•ì¸
#[test]
fn test_cli_process_file() {
    let mut cmd = Command::cargo_bin("my_cli").unwrap();

    cmd.arg("process")
        .arg("--input")
        .arg("test_input.txt")
        .assert()
        .success()
        .stdout(predicate::str::contains("ì²˜ë¦¬ ì™„ë£Œ"));
}
```

---

## 15. E2E í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™

### 15.1 íŒŒì¼ êµ¬ì¡°

```
tests/
â”œâ”€â”€ common/
â”œâ”€â”€ integration/
â””â”€â”€ e2e/                     # E2E í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ cli_test.rs
    â””â”€â”€ api_test.rs
```

### 15.2 ë„¤ì´ë° ê·œì¹™

**íŒŒì¼ëª…**: `{ëŒ€ìƒ}_test.rs`
- `cli_test.rs`
- `api_test.rs`

**í•¨ìˆ˜ëª…**: `test_{ì‹œë‚˜ë¦¬ì˜¤}_flow`
- `test_user_registration_flow`
- `test_data_processing_flow`

### 15.3 Docstring í˜•ì‹

```rust
/// E2E í…ŒìŠ¤íŠ¸ ID: E2E-002
/// ì‹œë‚˜ë¦¬ì˜¤: ë°ì´í„° ì—…ë¡œë“œ â†’ ì²˜ë¦¬ â†’ ê²°ê³¼ í™•ì¸
///
/// ê²€ì¦ ë‹¨ê³„:
/// 1. íŒŒì¼ ì—…ë¡œë“œ ìš”ì²­
/// 2. ì²˜ë¦¬ ì™„ë£Œ ëŒ€ê¸°
/// 3. ê²°ê³¼ ì¡°íšŒ ë° ê²€ì¦
///
/// ì‚¬ì „ ì¡°ê±´:
/// - í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° íŒŒì¼ ì¤€ë¹„
///
/// ì˜ˆìƒ ê²°ê³¼:
/// - ì²˜ë¦¬ ì™„ë£Œ ìƒíƒœ ë°˜í™˜
#[test]
fn test_data_upload_to_result() {
    // ...
}
```

---

## 16. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cargo test

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
cargo test --lib

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
cargo test --test '*'

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cargo test test_add_positive_numbers

# ë¬´ì‹œëœ í…ŒìŠ¤íŠ¸ í¬í•¨ ì‹¤í–‰
cargo test -- --ignored

# í…ŒìŠ¤íŠ¸ ì¶œë ¥ í‘œì‹œ
cargo test -- --nocapture
```

---

## 17. E2E í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] docstringì— **E2E í…ŒìŠ¤íŠ¸ ID** (E2E-XXX)ê°€ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ì‹œë‚˜ë¦¬ì˜¤**ê°€ ì‚¬ìš©ì ê´€ì ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ê²€ì¦ ë‹¨ê³„**ê°€ ìˆœì„œëŒ€ë¡œ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] docstringì— **ì‚¬ì „ ì¡°ê±´**ê³¼ **ì˜ˆìƒ ê²°ê³¼**ê°€ ëª…ì‹œë˜ì–´ ìˆëŠ”ê°€?
- [ ] `tests/e2e/` ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•´ ìˆëŠ”ê°€?
- [ ] í…ŒìŠ¤íŠ¸ê°€ **ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥**í•œê°€?

---

## 18. ì˜ì¡´ì„± ì„¤ì • (Cargo.toml)

```toml
[dev-dependencies]
# í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ (ê¸°ë³¸ ì œê³µ)

# Mocking
mockall = "0.12"

# CLI í…ŒìŠ¤íŠ¸
assert_cmd = "2.0"
predicates = "3.0"

# HTTP í…ŒìŠ¤íŠ¸
reqwest = { version = "0.11", features = ["blocking"] }

# í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ
testcontainers = "0.15"

# ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸
tokio-test = "0.4"
```

---
